<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="API" href="api.html" /><link rel="prev" title="Installation" href="installation.html" />

    <!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Usage - TerraCatalogue client 0.1.19 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">TerraCatalogue client 0.1.19 documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">TerraCatalogue client 0.1.19 documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Usage</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/usage.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="usage">
<h1>Usage<a class="headerlink" href="#usage" title="Link to this heading">¶</a></h1>
<p>On this page, some code examples are listed to get you started.</p>
<section id="catalogue-configuration">
<h2>Catalogue configuration<a class="headerlink" href="#catalogue-configuration" title="Link to this heading">¶</a></h2>
<p>When you create a catalogue object, you can provide a configuration file with the details of the catalogue you wish to connect to:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">terracatalogueclient</span> <span class="kn">import</span> <span class="n">Catalogue</span>
<span class="kn">from</span> <span class="nn">terracatalogueclient.config</span> <span class="kn">import</span> <span class="n">CatalogueConfig</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">CatalogueConfig</span><span class="o">.</span><span class="n">from_file</span><span class="p">(</span><span class="s2">&quot;/path/to/configuration.ini&quot;</span><span class="p">)</span>
<span class="n">catalogue</span> <span class="o">=</span> <span class="n">Catalogue</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>  <span class="c1"># catalogue with custom configuration</span>
</pre></div>
</div>
<p>Check the <a class="reference internal" href="api.html#terracatalogueclient.config.CatalogueConfig" title="terracatalogueclient.config.CatalogueConfig"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CatalogueConfig</span></code></a> API for more information on how to load a configuration file.</p>
<section id="terrascope-configuration">
<h3>Terrascope configuration<a class="headerlink" href="#terrascope-configuration" title="Link to this heading">¶</a></h3>
<p>If no configuration is supplied, the default <a class="reference external" href="https://terrascope.be/">Terrascope</a> configuration will be used:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">terracatalogueclient</span> <span class="kn">import</span> <span class="n">Catalogue</span>
<span class="n">catalogue</span> <span class="o">=</span> <span class="n">Catalogue</span><span class="p">()</span>  <span class="c1"># catalogue with default Terrascope configuration</span>
</pre></div>
</div>
<p>A configuration file has the following structure. The default configuration is used as an example:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Catalogue]</span>
<span class="na">URL</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">https://services.terrascope.be/catalogue/</span>

<span class="k">[Auth]</span>
<span class="na">ClientId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">terracatalogueclient</span>
<span class="na">ClientSecret</span><span class="w"> </span><span class="o">=</span>
<span class="na">TokenEndpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">https://sso.terrascope.be/auth/realms/terrascope/protocol/openid-connect/token</span>
<span class="na">AuthorizationEndpoint</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">https://sso.terrascope.be/auth/realms/terrascope/protocol/openid-connect/auth</span>
<span class="na">InteractiveSupported</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>
<span class="na">NonInteractiveSupported</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">True</span>

<span class="k">[HTTP]</span>
<span class="na">ChunkSize</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">2097152</span>

<span class="c1"># S3 is not supported by the Terrascope catalogue, so configuration is empty</span>
<span class="k">[S3]</span>
<span class="na">AccessKey</span><span class="w"> </span><span class="o">=</span>
<span class="na">SecretKey</span><span class="w"> </span><span class="o">=</span>
<span class="na">EndpointUrl</span><span class="w"> </span><span class="o">=</span>
</pre></div>
</div>
</section>
<section id="pre-defined-configurations">
<h3>Pre-defined configurations<a class="headerlink" href="#pre-defined-configurations" title="Link to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">terracatalogueclient</span></code> also supports other catalogues:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://land.copernicus.eu/pan-european/biophysical-parameters/high-resolution-vegetation-phenology-and-productivity">HR-VPP</a></p></li>
<li><p><a class="reference external" href="https://land.copernicus.eu/global/">Copernicus Global Land Service (CGLS)</a></p></li>
</ul>
<p>We include pre-defined configurations for them. The following code snippet shows how to initialize the client for use with the HR-VPP catalogue:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">terracatalogueclient</span> <span class="kn">import</span> <span class="n">Catalogue</span>
<span class="kn">from</span> <span class="nn">terracatalogueclient.config</span> <span class="kn">import</span> <span class="n">CatalogueConfig</span><span class="p">,</span> <span class="n">CatalogueEnvironment</span>

<span class="n">config</span> <span class="o">=</span> <span class="n">CatalogueConfig</span><span class="o">.</span><span class="n">from_environment</span><span class="p">(</span><span class="n">CatalogueEnvironment</span><span class="o">.</span><span class="n">HRVPP</span><span class="p">)</span>
<span class="n">catalogue</span> <span class="o">=</span> <span class="n">Catalogue</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
</pre></div>
</div>
<p>For CGLS, the <a class="reference internal" href="api.html#terracatalogueclient.config.CatalogueEnvironment.CGLS" title="terracatalogueclient.config.CatalogueEnvironment.CGLS"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CGLS</span></code></a> <a class="reference internal" href="api.html#terracatalogueclient.config.CatalogueEnvironment" title="terracatalogueclient.config.CatalogueEnvironment"><code class="xref py py-obj docutils literal notranslate"><span class="pre">CatalogueEnvironment</span></code></a> can be used.</p>
</section>
</section>
<section id="authentication">
<h2>Authentication<a class="headerlink" href="#authentication" title="Link to this heading">¶</a></h2>
<p>Downloading products and accessing protected collections may require you to authenticate. This is done by first creating a catalogue object and subsequently calling the <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.authenticate" title="terracatalogueclient.client.Catalogue.authenticate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">authenticate()</span></code></a> or <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.authenticate_non_interactive" title="terracatalogueclient.client.Catalogue.authenticate_non_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">authenticate_non_interactive()</span></code></a> method.
The <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.authenticate" title="terracatalogueclient.client.Catalogue.authenticate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">authenticate()</span></code></a> method will open a browser window to provide you with a login form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">terracatalogueclient</span> <span class="kn">import</span> <span class="n">Catalogue</span>
<span class="n">catalogue</span> <span class="o">=</span> <span class="n">Catalogue</span><span class="p">()</span><span class="o">.</span><span class="n">authenticate</span><span class="p">()</span>  <span class="c1"># authenticated catalogue</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.authenticate_non_interactive" title="terracatalogueclient.client.Catalogue.authenticate_non_interactive"><code class="xref py py-meth docutils literal notranslate"><span class="pre">authenticate_non_interactive()</span></code></a> method uses the provided username and password directly to obtain an access token. However, it is a bad practice to store your credentials directly in a script!</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The CGLS catalogue doesn’t require authentication to download products.</p>
</div>
</section>
<section id="query-collections">
<h2>Query collections<a class="headerlink" href="#query-collections" title="Link to this heading">¶</a></h2>
<p>Get all available collections and print the collection identifiers and their titles:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">terracatalogueclient</span> <span class="kn">import</span> <span class="n">Catalogue</span>
<span class="n">catalogue</span> <span class="o">=</span> <span class="n">Catalogue</span><span class="p">()</span>
<span class="n">collections</span> <span class="o">=</span> <span class="n">catalogue</span><span class="o">.</span><span class="n">get_collections</span><span class="p">()</span>
<span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">collections</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">c</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s1">&#39;title&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Query collections based on the acquisition platform:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collections</span> <span class="o">=</span> <span class="n">catalogue</span><span class="o">.</span><span class="n">get_collections</span><span class="p">(</span><span class="n">platform</span><span class="o">=</span><span class="s2">&quot;SENTINEL-1&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.get_collections" title="terracatalogueclient.client.Catalogue.get_collections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_collections()</span></code></a> method returns an <code class="docutils literal notranslate"><span class="pre">Iterator</span></code> of
<a class="reference internal" href="api.html#terracatalogueclient.client.Collection" title="terracatalogueclient.client.Collection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Collection</span></code></a> objects. If you want to iterate multiple times over the collections,
you can wrap the iterator in a list, but this will also load all results in memory:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">collections_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">catalogue</span><span class="o">.</span><span class="n">get_collections</span><span class="p">())</span>
</pre></div>
</div>
<p>To get more information on the available query parameters, you can take a look at the
<a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.get_collections" title="terracatalogueclient.client.Catalogue.get_collections"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_collections()</span></code></a> method in the <a class="reference internal" href="api.html"><span class="doc">API</span></a>.
The <a class="reference external" href="https://docs.terrascope.be/#/Developers/WebServices/TerraCatalogue/TerraCatalogue?id=the-opensearch-description-document">OpenSearch Description Document</a> contains a complete list of all supported parameters.</p>
</section>
<section id="query-products">
<h2>Query products<a class="headerlink" href="#query-products" title="Link to this heading">¶</a></h2>
<p>For querying products, the <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.get_products" title="terracatalogueclient.client.Catalogue.get_products"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_products()</span></code></a> method can be used.
The collection identifier is the only mandatory parameter for this method.</p>
<p>Get Sentinel-2 NDVI products for May 2020 with tile identifier 31UGS:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">products</span> <span class="o">=</span> <span class="n">catalogue</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span>
    <span class="s2">&quot;urn:eop:VITO:TERRASCOPE_S2_NDVI_V2&quot;</span><span class="p">,</span>
    <span class="n">start</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">end</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
    <span class="n">tileId</span><span class="o">=</span><span class="s2">&quot;31UGS&quot;</span>
<span class="p">)</span>
<span class="k">for</span> <span class="n">product</span> <span class="ow">in</span> <span class="n">products</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">product</span><span class="o">.</span><span class="n">title</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that the <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.get_products" title="terracatalogueclient.client.Catalogue.get_products"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_products()</span></code></a> method returns an <code class="docutils literal notranslate"><span class="pre">Iterator</span></code> of
<a class="reference internal" href="api.html#terracatalogueclient.client.Product" title="terracatalogueclient.client.Product"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Product</span></code></a> objects. If you want to iterate multiple times over these products,
you can wrap the iterator in a list, but this will also load all results in memory:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">products_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">catalogue</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span><span class="o">...</span><span class="p">))</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your product query has more results than supported by the pagination of the catalogue, a <a class="reference internal" href="api.html#terracatalogueclient.exceptions.TooManyResultsException" title="terracatalogueclient.exceptions.TooManyResultsException"><code class="xref py py-obj docutils literal notranslate"><span class="pre">TooManyResultsException</span></code></a> will be raised.</p>
</div>
<p>There is a separate method to get product counts: <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.get_product_count" title="terracatalogueclient.client.Catalogue.get_product_count"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_product_count()</span></code></a>. This method is much more efficient than first retrieving all products and then counting them.
Here is a query to get the number of products per collection for 2019:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">collections</span> <span class="o">=</span> <span class="n">catalogue</span><span class="o">.</span><span class="n">get_collections</span><span class="p">()</span>
<span class="k">for</span> <span class="n">collection</span> <span class="ow">in</span> <span class="n">collections</span><span class="p">:</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">catalogue</span><span class="o">.</span><span class="n">get_product_count</span><span class="p">(</span>
        <span class="n">collection</span><span class="o">.</span><span class="n">id</span><span class="p">,</span>
        <span class="n">start</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2019</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
        <span class="n">end</span><span class="o">=</span><span class="n">dt</span><span class="o">.</span><span class="n">date</span><span class="p">(</span><span class="mi">2020</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
    <span class="p">)</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">collection</span><span class="o">.</span><span class="n">id</span><span class="si">}</span><span class="s2">: </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>To get more information on the available query parameters, you can take a look at the
<a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.get_products" title="terracatalogueclient.client.Catalogue.get_products"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_products()</span></code></a> method in the <a class="reference internal" href="api.html"><span class="doc">API</span></a>.
The collection specific <a class="reference external" href="https://docs.terrascope.be/#/Developers/WebServices/TerraCatalogue/TerraCatalogue?id=the-opensearch-description-document">OpenSearch Description Document</a> contains a complete list of all supported parameters for a product query.</p>
</section>
<section id="download-products">
<h2>Download products<a class="headerlink" href="#download-products" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are working on the Terrascope Notebooks or VM, you don’t have to download products. They are already locally available.
To get the local path of the products, use the <code class="docutils literal notranslate"><span class="pre">accessedFrom=&quot;MEP&quot;</span></code> parameter in the product search:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">products</span> <span class="o">=</span> <span class="n">catalogue</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span>
    <span class="n">collection</span><span class="o">=</span><span class="s2">&quot;urn:eop:VITO:TERRASCOPE_S2_FAPAR_V2&quot;</span><span class="p">,</span>
    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2021-02-01&quot;</span><span class="p">,</span>
    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2021-02-28&quot;</span><span class="p">,</span>
    <span class="n">tileId</span><span class="o">=</span><span class="s2">&quot;31UGS&quot;</span><span class="p">,</span>
    <span class="n">resolution</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">accessedFrom</span><span class="o">=</span><span class="s2">&quot;MEP&quot;</span>  <span class="c1"># get local path</span>
<span class="p">)</span>

<span class="c1"># href of the product file now contains the local path</span>
<span class="n">local_paths</span> <span class="o">=</span> <span class="p">[</span><span class="n">pf</span><span class="o">.</span><span class="n">href</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">products</span> <span class="k">for</span> <span class="n">pf</span> <span class="ow">in</span> <span class="n">p</span><span class="o">.</span><span class="n">data</span><span class="p">]</span>
</pre></div>
</div>
</div>
<section id="download-methods">
<h3>Download methods<a class="headerlink" href="#download-methods" title="Link to this heading">¶</a></h3>
<p>A catalogue may support multiple data access methods. Based on the <code class="docutils literal notranslate"><span class="pre">accessedFrom</span></code> search parameter supplied when querying products, the product file links will be provided for your preferred access method.
The default value is HTTP, but other options are (amongst others) S3 and MEP (local paths). This data access method will be used later when downloading the products.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Terrascope catalogue doesn’t support the S3 data access method. Consult the OpenSearch Description Document
(endpoint ‘/description’) to get allowed values per deployment (Terrascope, HRVPP).</p>
</div>
<p>For downloading products over S3, make sure to use the <code class="docutils literal notranslate"><span class="pre">accessedFrom=&quot;S3&quot;</span></code> parameter in the product search.
Also specify the S3 endpoint and S3 credentials, either in the configuration file or using environment variables:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">products</span> <span class="o">=</span> <span class="n">catalogue</span><span class="o">.</span><span class="n">get_products</span><span class="p">(</span>
    <span class="n">collection</span><span class="o">=</span><span class="n">collection</span><span class="p">,</span>
    <span class="n">start</span><span class="o">=</span><span class="s2">&quot;2021-01-01&quot;</span><span class="p">,</span>
    <span class="n">end</span><span class="o">=</span><span class="s2">&quot;2021-02-01&quot;</span><span class="p">,</span>
    <span class="n">tileId</span><span class="o">=</span><span class="s2">&quot;31UES&quot;</span><span class="p">,</span>
    <span class="n">accessedFrom</span><span class="o">=</span><span class="s2">&quot;S3&quot;</span>
<span class="p">)</span>
<span class="c1"># download automatically selects the access method specified when querying the products</span>
<span class="n">catalogue</span><span class="o">.</span><span class="n">download_products</span><span class="p">(</span><span class="n">products</span><span class="p">,</span> <span class="n">path</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="filter-files">
<h3>Filter files<a class="headerlink" href="#filter-files" title="Link to this heading">¶</a></h3>
<p>It is possible to filter out the files that are of interest for you. By default, all product files will be downloaded.
The filtering is handled by the <code class="docutils literal notranslate"><span class="pre">file_types</span></code> parameter of the download method.
This parameter expects an enum flag of type <a class="reference internal" href="api.html#terracatalogueclient.client.ProductFileType" title="terracatalogueclient.client.ProductFileType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ProductFileType</span></code></a>.
You can combine multiple of these flags to download several types of product files. This is done with the <code class="docutils literal notranslate"><span class="pre">|</span></code> operator.</p>
<p>The following example will download the data files and related resources (eg. cloud mask):</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">catalogue</span><span class="o">.</span><span class="n">download_product</span><span class="p">(</span><span class="n">product</span><span class="p">,</span> <span class="n">path</span><span class="p">,</span> <span class="n">ProductFileType</span><span class="o">.</span><span class="n">DATA</span> <span class="o">|</span> <span class="n">ProductFileType</span><span class="o">.</span><span class="n">RELATED</span><span class="p">)</span>
</pre></div>
</div>
<p>Check the <a class="reference internal" href="api.html"><span class="doc">API</span></a> for a full overview of the download methods (<a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.download_product" title="terracatalogueclient.client.Catalogue.download_product"><code class="xref py py-meth docutils literal notranslate"><span class="pre">download_product()</span></code></a> or <a class="reference internal" href="api.html#terracatalogueclient.client.Catalogue.download_products" title="terracatalogueclient.client.Catalogue.download_products"><code class="xref py py-meth docutils literal notranslate"><span class="pre">download_products()</span></code></a>) and the <a class="reference internal" href="api.html#terracatalogueclient.client.ProductFileType" title="terracatalogueclient.client.ProductFileType"><code class="xref py py-obj docutils literal notranslate"><span class="pre">ProductFileType</span></code></a> enum flag.</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="api.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">API</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="installation.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Installation</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; Stijn Caerts
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            <div class="last-updated">
              Last updated on 2025/02/07</div>
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Usage</a><ul>
<li><a class="reference internal" href="#catalogue-configuration">Catalogue configuration</a><ul>
<li><a class="reference internal" href="#terrascope-configuration">Terrascope configuration</a></li>
<li><a class="reference internal" href="#pre-defined-configurations">Pre-defined configurations</a></li>
</ul>
</li>
<li><a class="reference internal" href="#authentication">Authentication</a></li>
<li><a class="reference internal" href="#query-collections">Query collections</a></li>
<li><a class="reference internal" href="#query-products">Query products</a></li>
<li><a class="reference internal" href="#download-products">Download products</a><ul>
<li><a class="reference internal" href="#download-methods">Download methods</a></li>
<li><a class="reference internal" href="#filter-files">Filter files</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=3d116926"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    </body>
</html>